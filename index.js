"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStore=createStore,exports.createMutationController=void 0;function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}/** 
HELPERS 
***/var checkForAnyPathEquality=function(a,b){if(!a)throw new Error("Cannot find needed path with current wildcard");Object.keys(a).filter(function(b){return"object"!==_typeof(a[b])});for(var c in a)return a[c][b]?a[c][b]:checkForAnyPathEquality(a[c],b);return null},smack=function(a){var b=function(b){if(!a)throw new Error("Store is not created");var c=b.split(".");if(!c.length)throw new Error("There is no such field name");else{if(c===b)return a[b];if("*"===c[0])throw new Error("Cannot use wildcard-operator from the root of the store");for(var d=c[0],e=a[d],f=1;f<c.length;f++)if("*"!==c[f])d=c[f],e=e[d];else if("*"===c[f+1])throw new Error("Cannot use * after *");else{var g=checkForAnyPathEquality(e,c[f+1]);if(g)return g;throw new Error("Cannot find value with that wildcard")}return e}};return function(a){return b(a)}};/** STORE-CREATION FUNCTION */function createStore(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],c=[],d={};for(var g in a)d[g]=a[g](g),d[g]=d[g](d,function(){return c},b);var e=smack(d,c),f=_objectSpread(_objectSpread({},d),{},{smack:e,subscribe:function subscribe(a){return c.push(a),c.length-1},unsubscribe:function unsubscribe(a){return c.splice(a,1)}});return f}/** STORE CREATION FUNCTION */ /** STATE MANGEMENT CONTROLLER */var createMutationController=function(a){return function(b){return function(c,d,e){var f=this,g=function(c){var g,h=c[0].toUpperCase()+c.slice(1),i="update"+h,j="clear"+h,k=d(),l=(g={},_defineProperty(g,i,function(a){var d=_objectSpread({},f[b]);f[b][c]=a;for(var g=0;g<k.length;g++)k[g](f[b]);for(var h=0;h<e.length;h++)e[h]({prevState:_defineProperty({},b,d),state:_defineProperty({},b,f[b]),mutationName:i});return!0}),_defineProperty(g,j,function(){var d=_objectSpread({},f[b][c]);f[b][c]=a()[c];for(var g=0;g<k.length;g++)k[g](f[b]);for(var h=0;h<e.length;h++)e[h]({prevState:_defineProperty({},b,d),state:_defineProperty({},b,f[b]),mutationName:j});return!0}),g);return l},h=a();for(var i in h){var j=g.call(c,i,h);h=_objectSpread(_objectSpread({},h),j)}return h}}};/** STATE MANGEMENT CONTROLLER */exports.createMutationController=createMutationController;